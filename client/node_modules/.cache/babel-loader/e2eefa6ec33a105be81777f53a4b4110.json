{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\src\\views\\system\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\src\\views\\system\\user.vue","mtime":1620834720964},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/django-vue-admin3333/client/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"C:/Users/Administrator/Desktop/django-vue-admin3333/client/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _user = require(\"@/api/user\");\n\nvar _org = require(\"@/api/org\");\n\nvar _role = require(\"@/api/role\");\n\nvar _utils = require(\"@/utils\");\n\nvar _permission = _interopRequireDefault(require(\"@/utils/permission\"));\n\nvar _file = require(\"@/api/file\");\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar _vueTreeselect = _interopRequireDefault(require(\"@riophae/vue-treeselect\"));\n\nrequire(\"@riophae/vue-treeselect/dist/vue-treeselect.css\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// secondary package based on el-pagination\nvar defaultUser = {\n  id: \"\",\n  name: \"\",\n  username: \"\",\n  dept: null,\n  avatar: \"/media/default/avatar.png\"\n};\nvar _default = {\n  components: {\n    Pagination: _Pagination.default,\n    Treeselect: _vueTreeselect.default\n  },\n  data: function data() {\n    return {\n      user: defaultUser,\n      upHeaders: (0, _file.upHeaders)(),\n      upUrl: (0, _file.upUrl)(),\n      userList: {\n        count: 0\n      },\n      roles: [],\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        page_size: 20\n      },\n      enabledOptions: [{\n        key: \"true\",\n        display_name: \"激活\"\n      }, {\n        key: \"false\",\n        display_name: \"禁用\"\n      }],\n      dialogVisible: false,\n      dialogType: \"new\",\n      rule1: {\n        name: [{\n          required: true,\n          message: \"请输入姓名\",\n          trigger: \"blur\"\n        }],\n        username: [{\n          required: true,\n          message: \"请输入账号\",\n          trigger: \"change\"\n        }] // password: [\n        //   { required: true, message: '请输入密码', trigger: 'change' }\n        // ],\n\n      },\n      filterOrgText: \"\",\n      treeLoding: false,\n      orgData: []\n    };\n  },\n  computed: {},\n  watch: {\n    filterOrgText: function filterOrgText(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created: function created() {\n    this.getList();\n    this.getOrgAll();\n    this.getRoleAll();\n  },\n  methods: {\n    checkPermission: _permission.default,\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.user.avatar = res.data.path;\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n\n      return isLt2M;\n    },\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    handleOrgClick: function handleOrgClick(obj, node, vue) {\n      this.listQuery.page = 1;\n      this.listQuery.dept = obj.id;\n      this.getList();\n    },\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      (0, _user.getUserList)(this.listQuery).then(function (response) {\n        if (response.data) {\n          _this.userList = response.data;\n        }\n\n        _this.listLoading = false;\n      });\n    },\n    getOrgAll: function getOrgAll() {\n      var _this2 = this;\n\n      this.treeLoding = true;\n      (0, _org.getOrgAll)().then(function (response) {\n        _this2.orgData = (0, _utils.genTree)(response.data);\n        _this2.treeLoding = false;\n      });\n    },\n    getRoleAll: function getRoleAll() {\n      var _this3 = this;\n\n      (0, _role.getRoleAll)().then(function (response) {\n        _this3.roles = (0, _utils.genTree)(response.data);\n      });\n    },\n    resetFilter: function resetFilter() {\n      this.listQuery = {\n        page: 1,\n        page_size: 20\n      };\n      this.getList();\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n    handleAddUser: function handleAddUser() {\n      var _this4 = this;\n\n      this.user = Object.assign({}, defaultUser);\n      this.dialogType = \"new\";\n      this.dialogVisible = true;\n      this.$nextTick(function () {\n        _this4.$refs[\"Form\"].clearValidate();\n      });\n    },\n    handleEdit: function handleEdit(scope) {\n      var _this5 = this;\n\n      this.user = Object.assign({}, scope.row); // copy obj\n\n      this.dialogType = \"edit\";\n      this.dialogVisible = true;\n      this.$nextTick(function () {\n        _this5.$refs[\"Form\"].clearValidate();\n      });\n    },\n    handleDelete: function handleDelete(scope) {\n      var _this6 = this;\n\n      this.$confirm(\"确认删除?\", \"警告\", {\n        confirmButtonText: \"确认\",\n        cancelButtonText: \"取消\",\n        type: \"error\"\n      }).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return (0, _user.deleteUser)(scope.row.id);\n\n              case 2:\n                _this6.userList.splice(scope.row.index, 1);\n\n                _this6.$message({\n                  type: \"success\",\n                  message: \"成功删除!\"\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))).catch(function (err) {\n        console.error(err);\n      });\n    },\n    confirm: function () {\n      var _confirm = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(form) {\n        var _this7 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.$refs[form].validate(function (valid) {\n                  if (valid) {\n                    var isEdit = _this7.dialogType === \"edit\";\n\n                    if (isEdit) {\n                      (0, _user.updateUser)(_this7.user.id, _this7.user).then(function (res) {\n                        _this7.getList();\n\n                        _this7.dialogVisible = false;\n\n                        _this7.$message({\n                          message: \"编辑成功\",\n                          type: \"success\"\n                        });\n                      });\n                    } else {\n                      (0, _user.createUser)(_this7.user).then(function (res) {\n                        _this7.getList();\n\n                        _this7.dialogVisible = false;\n\n                        _this7.$message({\n                          message: \"新增成功\",\n                          type: \"success\"\n                        });\n                      });\n                    }\n                  } else {\n                    return false;\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function confirm(_x) {\n        return _confirm.apply(this, arguments);\n      }\n\n      return confirm;\n    }()\n  }\n};\nexports.default = _default;",null]}