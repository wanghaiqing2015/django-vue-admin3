{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\src\\views\\system\\organization.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\src\\views\\system\\organization.vue","mtime":1620834720964},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin3333\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/django-vue-admin3333/client/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"C:/Users/Administrator/Desktop/django-vue-admin3333/client/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nvar _org = require(\"@/api/org\");\n\nvar _utils = require(\"@/utils\");\n\nvar _permission = _interopRequireDefault(require(\"@/utils/permission\"));\n\nvar _vueTreeselect = _interopRequireDefault(require(\"@riophae/vue-treeselect\"));\n\nrequire(\"@riophae/vue-treeselect/dist/vue-treeselect.css\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar defaultOrg = {\n  id: null,\n  name: '',\n  parent: null\n};\nvar _default = {\n  components: {\n    Treeselect: _vueTreeselect.default\n  },\n  data: function data() {\n    return {\n      org: {\n        id: '',\n        name: '',\n        parent: ''\n      },\n      search: '',\n      tableData: [],\n      orgList: [],\n      listLoading: true,\n      dialogVisible: false,\n      dialogType: 'new',\n      rule1: {\n        name: [{\n          required: true,\n          message: '请输入名称',\n          trigger: 'blur'\n        }],\n        parent: [{\n          required: true,\n          message: '请选择上级',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  computed: {},\n  created: function created() {\n    this.getList();\n  },\n  methods: {\n    checkPermission: _permission.default,\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      (0, _org.getOrgAll)().then(function (response) {\n        _this.orgList = response.data;\n        var data = (0, _utils.genTree)(response.data);\n        _this.tableData = data;\n        _this.listLoading = false;\n      });\n    },\n    resetFilter: function resetFilter() {\n      this.getList();\n    },\n    handleFilter: function handleFilter() {\n      var _this2 = this;\n\n      var newData = this.orgList.filter(function (data) {\n        return !_this2.search || data.name.toLowerCase().includes(_this2.search.toLowerCase());\n      });\n      this.tableData = (0, _utils.genTree)(newData);\n    },\n    handleAdd: function handleAdd() {\n      var _this3 = this;\n\n      this.org = Object.assign({}, defaultOrg);\n      this.dialogType = 'new';\n      this.dialogVisible = true;\n      this.$nextTick(function () {\n        _this3.$refs['Form'].clearValidate();\n      });\n    },\n    handleEdit: function handleEdit(scope) {\n      var _this4 = this;\n\n      this.org = Object.assign({}, scope.row); // copy obj\n\n      this.dialogType = 'edit';\n      this.dialogVisible = true;\n      this.$nextTick(function () {\n        _this4.$refs['Form'].clearValidate();\n      });\n    },\n    handleDelete: function handleDelete(scope) {\n      var _this5 = this;\n\n      this.$confirm('确认删除?', '警告', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'error'\n      }).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return (0, _org.deleteOrg)(scope.row.id);\n\n              case 2:\n                _this5.getList();\n\n                _this5.$message({\n                  type: 'success',\n                  message: '成功删除!'\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))).catch(function (err) {\n        console.error(err);\n      });\n    },\n    confirmOrg: function () {\n      var _confirmOrg = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(form) {\n        var _this6 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.$refs[form].validate(function (valid) {\n                  if (valid) {\n                    var isEdit = _this6.dialogType === 'edit';\n\n                    if (isEdit) {\n                      (0, _org.updateOrg)(_this6.org.id, _this6.org).then(function () {\n                        _this6.getList();\n\n                        _this6.dialogVisible = false;\n\n                        _this6.$message({\n                          message: '编辑成功',\n                          type: 'success'\n                        });\n                      });\n                    } else {\n                      (0, _org.createOrg)(_this6.org).then(function (res) {\n                        // this.org = res.data\n                        // this.tableData.unshift(this.org)\n                        _this6.getList();\n\n                        _this6.dialogVisible = false;\n\n                        _this6.$message({\n                          message: '新增成功',\n                          type: 'success'\n                        });\n                      });\n                    }\n                  } else {\n                    return false;\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function confirmOrg(_x) {\n        return _confirmOrg.apply(this, arguments);\n      }\n\n      return confirmOrg;\n    }()\n  }\n};\nexports.default = _default;",null]}